<!doctype html>

<html lang="en">

<head>
  <title>(W)rapping About Exceptional Behavior in Rails - Kevin Murphy</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Why is our Rails app returning different HTTP status codes in different versions of Rails? Learn some tips and tricks for navigating a large ruby code base in this post." />
<meta name="author" content="Kevin Murphy" />

<link rel="canonical" href="https://www.thegnar.com/blog/wrapping-about-exceptional-behavior-in-rails">
<meta property="og:title" content="(W)rapping About Exceptional Behavior in Rails" />
<meta property="og:description" content="Why is our Rails app returning different HTTP status codes in different versions of Rails? Learn some tips and tricks for navigating a large ruby code base in this post." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kevinjmurphy.com/posts/wrapping-about-exceptional-behavior-in-rails/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-21T20:24:01-04:00" />
<meta property="article:modified_time" content="2021-03-21T20:24:01-04:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="(W)rapping About Exceptional Behavior in Rails"/>
<meta name="twitter:description" content="Why is our Rails app returning different HTTP status codes in different versions of Rails? Learn some tips and tricks for navigating a large ruby code base in this post."/>

<meta name="generator" content="Hugo 0.104.2" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://kevinjmurphy.com/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://kevinjmurphy.com/css/styles.css" /><link rel='stylesheet' href='https://kevinjmurphy.com/css/link-style.css'><link rel='stylesheet' href='https://kevinjmurphy.com/css/code-scroll.css'><link rel='stylesheet' href='https://kevinjmurphy.com/css/coverage-emoji.css'>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RVD6VLNE04"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-RVD6VLNE04', { 'anonymize_ip': false });
}
</script>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-RVD6VLNE04', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://kevinjmurphy.com/">Kevin Murphy</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="https://github.com/kevin-j-m" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://twitter.com/kevin_j_m" title="Twitter">
               <i class="fab fa-twitter fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://linkedin.com/in/kevinmurphydev" title="LinkedIn">
               <i class="fab fa-linkedin fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://dev.to/kevin_j_m" title="devto">
               <i class="fab fa-dev fa-lg"></i>
               </a>
             </li>
        <li>
          <a rel="me" href="https://ruby.social/@kevin_j_m">
          </a>
        </li>
      </ul>
      
      <p><em>Software Developer</em></p>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://kevinjmurphy.com/">
                <i class="fa-li fa  fa-lg"></i><span>Home</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://kevinjmurphy.com/about/">
                <i class="fa-li fa  fa-lg"></i><span>About</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://kevinjmurphy.com/speaking/">
                <i class="fa-li fa  fa-lg"></i><span>Speaking</span>
            </a>
        </li>
        
        <li>
          <a href="https://newsletter.kevinjmurphy.com">
                <i class="fa-li fa fa-lg"></i><span>Newsletter</span>
          </a>
        </li>
    </ul>
</nav>


    <main>




<article>

    <h1>(W)rapping About Exceptional Behavior in Rails</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2021-03-21T20:24:01-04:00">Mar 21, 2021</time>
        </li>
        
        

        
        <li>
            <em>
                
                    
                    <a href="https://kevinjmurphy.com/tags/ruby">#ruby</a>
                
                    , 
                    <a href="https://kevinjmurphy.com/tags/rails">#rails</a>
                
                    , 
                    <a href="https://kevinjmurphy.com/tags/bundler">#bundler</a>
                
                    , 
                    <a href="https://kevinjmurphy.com/tags/debugging">#debugging</a>
                
            </em>
        </li>
        

        <li>6 minute read | 1275 words</li>
    </ul>
</aside>

    

    


    <h2 id="exceptional-behavior-in-rails">Exceptional Behavior in Rails <a href="#exceptional-behavior-in-rails">ðŸ”—</a></h2>
<ol>
<li><strong>(W)rapping About Exceptional Behavior In Rails</strong></li>
<li><a href="https://kevinjmurphy.com/posts/wrapping-up-rails-exceptional-behavior/">Wrapping Up Rails Exceptional Behavior</a></li>
</ol>
<h2 id="reset">Reset <a href="#reset">ðŸ”—</a></h2>
<h2 id="pop-quiz">Pop Quiz <a href="#pop-quiz">ðŸ”—</a></h2>
<p>Consider the following controller:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FoosController</span> <span style="color:#f92672">&lt;</span> <span style="color:#66d9ef">ActionController</span><span style="color:#f92672">::</span><span style="color:#66d9ef">API</span>
</span></span><span style="display:flex;"><span>  rescue_from <span style="color:#66d9ef">ActiveRecord</span><span style="color:#f92672">::</span><span style="color:#66d9ef">RecordNotFound</span>, <span style="color:#e6db74">with</span>: <span style="color:#e6db74">:raise_not_found</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#66d9ef">ActiveRecord</span><span style="color:#f92672">::</span><span style="color:#66d9ef">RecordNotFound</span>
</span></span><span style="display:flex;"><span>    head <span style="color:#e6db74">:ok</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">raise_not_found</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#e6db74">&#34;What status code?&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>Here we have an endpoint that that always raises <code>ActiveRecord::RecordNotFound</code>.
However, we&rsquo;re <a href="https://api.rubyonrails.org/v6.1.1/classes/ActiveSupport/Rescuable/ClassMethods.html">using</a>
<code>rescue_from</code> to handle this exception, and raise a new <code>RuntimeError</code>.</p>
<p>When you hit this controller endpoint, what status code do you expect to
receive?</p>
<h2 id="it-depends">It Depends <a href="#it-depends">ðŸ”—</a></h2>
<p>In Rails 6, we get a 500.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; curl -I -X POST localhost:3000/foos
</span></span><span style="display:flex;"><span>HTTP/1.1 <span style="color:#ae81ff">500</span> Internal Server Error
</span></span></code></pre></div><p>However, in Rails 5, we get a 404.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; curl -I -X POST localhost:3000/foos
</span></span><span style="display:flex;"><span>HTTP/1.1 <span style="color:#ae81ff">404</span> Not Found
</span></span></code></pre></div><p>Why does this difference exist? Let&rsquo;s dig into how to investigate.</p>
<h2 id="research">Research <a href="#research">ðŸ”—</a></h2>
<p>If you&rsquo;ve ever hit the <code>#show</code> route for a resource, passing it an ID that doesn&rsquo;t
exist, you may have noticed that Rails responds with a 404 Not Found HTTP status
code. Rails is intercepting the exception that&rsquo;s raised from calling <code>find</code>
(<code>ActiveRecord::RecordNotFound</code>) and, rather than returning a 500, it knows to
return a 404 instead.</p>
<h3 id="start-with-what-you-know">Start With What You Know <a href="#start-with-what-you-know">ðŸ”—</a></h3>
<p>To give us some grounding, let&rsquo;s begin by explicitly stating what we believe to be
true:</p>
<ul>
<li>Rails has some special handling of certain exceptions to respond with a
different HTTP status code.</li>
<li>If we <code>rescue_from</code> one of those exceptions in Rails 5 and re-raise a new
exception, we&rsquo;ll still see that special handling behavior.</li>
<li>In Rails 6, with the same implementation, the server now responds with a 500,
no longer considering it a special case.</li>
</ul>
<h3 id="go-explore">Go Explore <a href="#go-explore">ðŸ”—</a></h3>
<p>The exception that we know exhibits this behavior is
<code>ActiveRecord::RecordNotFound</code>. We also know that Rails returns a 404 Not Found
status code. If we search through the Rails codebase for <a href="https://github.com/rails/rails/search?p=1&amp;q=RecordNotFound">RecordNotFound</a> or <a href="https://github.com/rails/rails/search?p=1&amp;q=not_found">not_found</a> (which is the <a href="https://guides.rubyonrails.org/layouts_and_rendering.html#using-render">symbol representation</a> of the status code), we get a number of results - but there are fewer for <code>not_found</code>, so let&rsquo;s look through that.</p>
<p>Towards the bottom of the first page of results (as of this writing), we see the
<code>ExceptionWrapper</code> class, which includes <a href="https://github.com/rails/rails/blob/291a3d2ef29a3842d1156ada7526f4ee60dd2b59/actionpack/lib/action_dispatch/middleware/exception_wrapper.rb#L8-L24">this</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>  cattr_accessor <span style="color:#e6db74">:rescue_responses</span>, <span style="color:#e6db74">default</span>: <span style="color:#66d9ef">Hash</span><span style="color:#f92672">.</span>new(<span style="color:#e6db74">:internal_server_error</span>)<span style="color:#f92672">.</span>merge!(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::RoutingError&#34;</span>                     <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:not_found</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;AbstractController::ActionNotFound&#34;</span>                 <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:not_found</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::MethodNotAllowed&#34;</span>                 <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:method_not_allowed</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::UnknownHttpMethod&#34;</span>                <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:method_not_allowed</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::NotImplemented&#34;</span>                   <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:not_implemented</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::UnknownFormat&#34;</span>                    <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:not_acceptable</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionDispatch::Http::MimeNegotiation::InvalidType&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:not_acceptable</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::MissingExactTemplate&#34;</span>             <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:not_acceptable</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::InvalidAuthenticityToken&#34;</span>         <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:unprocessable_entity</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::InvalidCrossOriginRequest&#34;</span>        <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:unprocessable_entity</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionDispatch::Http::Parameters::ParseError&#34;</span>       <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:bad_request</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::BadRequest&#34;</span>                       <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:bad_request</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ActionController::ParameterMissing&#34;</span>                 <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:bad_request</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;Rack::QueryParser::ParameterTypeError&#34;</span>              <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:bad_request</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;Rack::QueryParser::InvalidParameterError&#34;</span>           <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:bad_request</span>
</span></span><span style="display:flex;"><span>    )
</span></span></code></pre></div><p>This looks like a big list of exceptions that are mapped to HTTP status codes.
This seems promising - but <code>ActiveRecord::RecordNotFound</code> isn&rsquo;t in this hash!</p>
<p>If we search further, we will eventually run into <a href="https://github.com/rails/rails/blob/d75c2a175215c0f6d011b60f1c9f2b6466184adb/activerecord/lib/active_record/railtie.rb#L22-L27">ActiveRecord&rsquo;s railtie</a>,
which includes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>config<span style="color:#f92672">.</span>action_dispatch<span style="color:#f92672">.</span>rescue_responses<span style="color:#f92672">.</span>merge!(
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ActiveRecord::RecordNotFound&#34;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:not_found</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ActiveRecord::StaleObjectError&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:conflict</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ActiveRecord::RecordInvalid&#34;</span>    <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:unprocessable_entity</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ActiveRecord::RecordNotSaved&#34;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:unprocessable_entity</span>
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>This is adding ActiveRecord exceptions to that same hash we saw above in
<code>ActionDispatch</code>. We&rsquo;ve found where the special handling of mapping exceptions
to status codes occurs!</p>
<h3 id="pull-out-some-tools">Pull Out Some Tools <a href="#pull-out-some-tools">ðŸ”—</a></h3>
<p>Returning to the <code>ExceptionWrapper</code> class, we see the <code>status_code_for_exception</code> <a href="https://github.com/rails/rails/blob/291a3d2ef29a3842d1156ada7526f4ee60dd2b59/actionpack/lib/action_dispatch/middleware/exception_wrapper.rb#L117-L119">method</a>, which looks to take in an exception class and convert it to a status code, based on the <code>@@rescue_responses</code> hash.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">self</span><span style="color:#f92672">.</span><span style="color:#a6e22e">status_code_for_exception</span>(class_name)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Rack</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Utils</span><span style="color:#f92672">.</span>status_code(@@rescue_responses<span style="color:#f92672">[</span>class_name<span style="color:#f92672">]</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>Maybe if we could see what class name is getting passed into that, we could see
if the exception is somehow getting transformed before or after that point. But,
we need a way to get into the rails source code on our running rails app -
that&rsquo;s not our code; how can we do that?</p>
<h4 id="opening-a-world-of-possibilities"><code>Open</code>ing A World of Possibilities <a href="#opening-a-world-of-possibilities">ðŸ”—</a></h4>
<p>Rails 5 appears to be showing confusing results - we&rsquo;re explicitly raising a
<code>RuntimeError</code>, but it&rsquo;s returning a 404. As such, let&rsquo;s look in Rails 5.</p>
<p>You can <a href="https://boringrails.com/tips/bundle-open-debug-gems">access the source</a>
of any dependency using bundler&rsquo;s <code>open</code> <a href="https://bundler.io/bundle_open.html">command</a>.
Rails itself is a series of gems, and we can see that this <code>ExceptionWrapper</code>
is part of <code>actionpack</code>, so let&rsquo;s open that up:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bundle open actionpack
</span></span></code></pre></div><p>This will open up the source code for the <code>actionpack</code> gem in the editor you have
defined. We open the <code>ExceptionWrapper</code> class, and we know we want to find out
what value is passed to it, but we&rsquo;re not sure what else we might want to see
while we&rsquo;re there. Using <a href="https://ruby-doc.org/stdlib-3.0.0/libdoc/irb/rdoc/Binding.html">Ruby&rsquo;s</a> <code>binding.irb</code>, we can <a href="https://jemma.dev/blog/binding-irb">start a console</a> when we hit that method.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">self</span><span style="color:#f92672">.</span><span style="color:#a6e22e">status_code_for_exception</span>(class_name)
</span></span><span style="display:flex;"><span>  binding<span style="color:#f92672">.</span>irb
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Rack</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Utils</span><span style="color:#f92672">.</span>status_code(@@rescue_responses<span style="color:#f92672">[</span>class_name<span style="color:#f92672">]</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>After starting a rails server, and issuing a request to our endpoint via curl,
we eventually hit our breakpoint:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#e6db74">From</span>: <span style="color:#e6db74">/ruby/</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span><span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>ruby<span style="color:#f92672">/</span>gems<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span>gems<span style="color:#f92672">/</span>actionpack<span style="color:#f92672">-</span><span style="color:#ae81ff">5</span><span style="color:#f92672">.</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span><span style="color:#ae81ff">4</span><span style="color:#f92672">.</span><span style="color:#ae81ff">5</span><span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>action_dispatch<span style="color:#f92672">/</span>middleware<span style="color:#f92672">/</span>exception_wrapper<span style="color:#f92672">.</span>rb <span style="color:#960050;background-color:#1e0010">@</span> line <span style="color:#ae81ff">86</span> :
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">81</span>:         <span style="color:#e6db74">&#34;Full Trace&#34;</span> <span style="color:#f92672">=&gt;</span> full_trace_with_ids
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">82</span>:       }
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">83</span>:     <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">84</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">85</span>:     <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">self</span><span style="color:#f92672">.</span><span style="color:#a6e22e">status_code_for_exception</span>(class_name)
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">86</span>:       binding<span style="color:#f92672">.</span>irb
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">87</span>:       <span style="color:#66d9ef">Rack</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Utils</span><span style="color:#f92672">.</span>status_code(@@rescue_responses<span style="color:#f92672">[</span>class_name<span style="color:#f92672">]</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">88</span>:     <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">89</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">90</span>:     <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">source_extracts</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">91</span>:       backtrace<span style="color:#f92672">.</span>map <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>trace<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>irb(<span style="color:#66d9ef">ActionDispatch</span><span style="color:#f92672">::</span><span style="color:#66d9ef">ExceptionWrapper</span>):<span style="color:#ae81ff">001</span>:<span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span>  class_name
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;RuntimeError&#34;</span>
</span></span></code></pre></div><p>This isn&rsquo;t surprising that we&rsquo;re getting the <code>RuntimeError</code>, but doesn&rsquo;t help
explain how we&rsquo;re getting a 404 returned. Let&rsquo;s exit and regroup on a new
strategy.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>irb(<span style="color:#66d9ef">ActionDispatch</span><span style="color:#f92672">::</span><span style="color:#66d9ef">ExceptionWrapper</span>):<span style="color:#ae81ff">002</span>:<span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span> exit
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Completed</span> <span style="color:#ae81ff">500</span> <span style="color:#66d9ef">Internal</span> <span style="color:#66d9ef">Server</span> <span style="color:#66d9ef">Error</span> <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">2</span>ms (<span style="color:#e6db74">ActiveRecord</span>: <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span>ms)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">From</span>: <span style="color:#e6db74">/ruby/</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span><span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>ruby<span style="color:#f92672">/</span>gems<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span>gems<span style="color:#f92672">/</span>actionpack<span style="color:#f92672">-</span><span style="color:#ae81ff">5</span><span style="color:#f92672">.</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span><span style="color:#ae81ff">4</span><span style="color:#f92672">.</span><span style="color:#ae81ff">5</span><span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>action_dispatch<span style="color:#f92672">/</span>middleware<span style="color:#f92672">/</span>exception_wrapper<span style="color:#f92672">.</span>rb <span style="color:#960050;background-color:#1e0010">@</span> line <span style="color:#ae81ff">86</span> :
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">81</span>:         <span style="color:#e6db74">&#34;Full Trace&#34;</span> <span style="color:#f92672">=&gt;</span> full_trace_with_ids
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">82</span>:       }
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">83</span>:     <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">84</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">85</span>:     <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">self</span><span style="color:#f92672">.</span><span style="color:#a6e22e">status_code_for_exception</span>(class_name)
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">86</span>:       binding<span style="color:#f92672">.</span>irb
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">87</span>:       <span style="color:#66d9ef">Rack</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Utils</span><span style="color:#f92672">.</span>status_code(@@rescue_responses<span style="color:#f92672">[</span>class_name<span style="color:#f92672">]</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">88</span>:     <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">89</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">90</span>:     <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">source_extracts</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">91</span>:       backtrace<span style="color:#f92672">.</span>map <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>trace<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>irb(<span style="color:#66d9ef">ActionDispatch</span><span style="color:#f92672">::</span><span style="color:#66d9ef">ExceptionWrapper</span>):<span style="color:#ae81ff">001</span>:<span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span>
</span></span></code></pre></div><p>Wait! This method is called a second time. And that time, the class name is
<em>still</em> <code>&quot;RuntimeError&quot;</code>. It gets called a <strong>third</strong> time, and that time, we see:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>irb(<span style="color:#66d9ef">ActionDispatch</span><span style="color:#f92672">::</span><span style="color:#66d9ef">ExceptionWrapper</span>):<span style="color:#ae81ff">001</span>:<span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span> class_name
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;ActiveRecord::RecordNotFound&#34;</span>
</span></span></code></pre></div><p>We&rsquo;ve found our <code>NotFound</code>! But - what do we do now?</p>
<h3 id="calling-in-a-favor"><code>Call</code>ing In A Favor <a href="#calling-in-a-favor">ðŸ”—</a></h3>
<p>We&rsquo;re still in our console session, and we&rsquo;ve executed the <code>status_code_for_exception</code> for the third time when processing a single HTTP request. What&rsquo;s calling this method? Ruby will tell us its <a href="https://ruby-doc.org/core-3.0.0/Kernel.html#method-i-caller">caller</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>irb(<span style="color:#66d9ef">ActionDispatch</span><span style="color:#f92672">::</span><span style="color:#66d9ef">ExceptionWrapper</span>):<span style="color:#ae81ff">002</span>:<span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span> caller
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/workspace.rb:85:in `eval&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/workspace.rb:85:in `evaluate&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/context.rb:385:in `evaluate&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:493:in `block (2 levels) in eval_input&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:647:in `signal_status&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:490:in `block in eval_input&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/ruby-lex.rb:246:in `block (2 levels) in each_top_level_statement&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/ruby-lex.rb:232:in `loop&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/ruby-lex.rb:232:in `block in each_top_level_statement&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/ruby-lex.rb:231:in `catch&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb/ruby-lex.rb:231:in `each_top_level_statement&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:489:in `eval_input&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:428:in `block in run&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:427:in `catch&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:427:in `run&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/2.6.0/irb.rb:796:in `irb&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/exception_wrapper.rb:86:in `status_code_for_exception&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/exception_wrapper.rb:46:in `status_code&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/debug_exceptions.rb:105:in `render_for_browser_request&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/debug_exceptions.rb:87:in `render_exception&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-3.7.0/lib/web_console/extensions.rb:28:in `render_exception_with_web_console&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/debug_exceptions.rb:71:in `rescue in call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-3.7.0/lib/web_console/middleware.rb:135:in `call_app&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-3.7.0/lib/web_console/middleware.rb:30:in `block in call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-3.7.0/lib/web_console/middleware.rb:20:in `catch&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-3.7.0/lib/web_console/middleware.rb:20:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/railties-5.2.4.5/lib/rails/rack/logger.rb:38:in `call_app&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/railties-5.2.4.5/lib/rails/rack/logger.rb:26:in `block in call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-5.2.4.5/lib/active_support/tagged_logging.rb:71:in `block in tagged&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-5.2.4.5/lib/active_support/tagged_logging.rb:28:in `tagged&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-5.2.4.5/lib/active_support/tagged_logging.rb:71:in `tagged&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/railties-5.2.4.5/lib/rails/rack/logger.rb:26:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/sprockets-rails-3.2.2/lib/sprockets/rails/quiet_assets.rb:13:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/remote_ip.rb:81:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/request_id.rb:27:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/method_override.rb:24:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/runtime.rb:22:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-5.2.4.5/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/executor.rb:14:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-5.2.4.5/lib/action_dispatch/middleware/static.rb:127:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/sendfile.rb:110:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/railties-5.2.4.5/lib/rails/engine.rb:524:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/puma-3.12.6/lib/puma/configuration.rb:227:in `call&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/puma-3.12.6/lib/puma/server.rb:706:in `handle_request&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/puma-3.12.6/lib/puma/server.rb:476:in `process_client&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/puma-3.12.6/lib/puma/server.rb:334:in `block in run&#39;&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/ruby/2.6.6/lib/ruby/gems/2.6.0/gems/puma-3.12.6/lib/puma/thread_pool.rb:135:in `block in spawn_thread&#39;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Starting from the bottom, we can see the full path that leads us to executing
<code>status_code_for_exception</code>. Tracing our way backwards from
<code>status_code_for_exception</code>, we eventually find where the <code>ExceptionWrapper</code> is
<a href="https://github.com/rails/rails/blob/63d3f3f4d868a5ed9eacf00af2a80278aa005051/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb#L78">created</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">render_exception</span>(request, exception)
</span></span><span style="display:flex;"><span>  backtrace_cleaner <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>get_header(<span style="color:#e6db74">&#34;action_dispatch.backtrace_cleaner&#34;</span>)
</span></span><span style="display:flex;"><span>  wrapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">ExceptionWrapper</span><span style="color:#f92672">.</span>new(backtrace_cleaner, exception)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span></code></pre></div><p>We drop a <code>binding.irb</code> in here, and it looks like the exception is always our
<code>RuntimeError</code>. It looks like something inside of <code>ExceptionWrapper</code> is doing
<em>something</em> to change this to an <code>ActiveRecord::RecordNotFound</code> exception.</p>
<h3 id="walk-away">Walk Away <a href="#walk-away">ðŸ”—</a></h3>
<p>We&rsquo;ve been at this for a while, and we&rsquo;ve got a lead to track down, but at this
point, let&rsquo;s take a break. We should clean up our mess by <a href="https://bundler.io/man/bundle-pristine.1.html">restoring</a>
<code>actionpack</code> back to how it was before.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bundle pristine
</span></span></code></pre></div><p>Let&rsquo;s take stock in what we&rsquo;ve done:</p>
<ul>
<li>Identified that Rails has a list of exceptions that it maps to specific HTTP
status codes.</li>
<li>Used <code>bundle open</code> to manipulate the source code of our dependency.</li>
<li>Inserted a <code>binding.irb</code> to play around in a method that we think is
interesting, and asked where it&rsquo;s being invoked with <code>caller</code>.</li>
<li>Confirmed that what&rsquo;s calling our class in question is always passing it a <code>RuntimeError</code>.</li>
</ul>
<p>We still don&rsquo;t know where the <code>ActiveRecord::RecordNotFound</code> exception is coming
from.</p>
<p>We&rsquo;ll take another look at this with fresh eyes in our <a href="https://kevinjmurphy.com/posts/wrapping-up-rails-exceptional-behavior/">next post</a>.</p>
<blockquote>
<p>This post originally published on <a href="https://blog.thegnar.co/wrapping-about-exceptional-behavior-in-rails">The Gnar Company blog</a>.</p>
</blockquote>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://kevinjmurphy.com/posts/engineering-mba/"><i class="fa fa-chevron-circle-left"></i> Engineering MBA</a>
        </li>
        
        
        <li>
            <a href="https://kevinjmurphy.com/posts/wrapping-up-rails-exceptional-behavior/">Wrapping Up Rails Exceptional Behavior <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
  
    
    
  





</main>
    <footer>
      <script async data-uid="7a2e7a1bb1" src="https://kevinjmurphy.ck.page/7a2e7a1bb1/index.js"></script>

        <h6>Copyright Â© 2022 - Kevin Murphy |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://kevinjmurphy.com/index.xml">RSS </a></h6>
    </footer>
</div>
<script src="https://kevinjmurphy.com/js/scripts.js"></script>

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RVD6VLNE04"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-RVD6VLNE04', { 'anonymize_ip': false });
}
</script>


</body>

</html>

