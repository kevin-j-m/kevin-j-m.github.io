<!doctype html>

<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>What Is It (in Ruby 3.4)? - Kevin Murphy</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Kevin Murphy: Software Developer" />
<meta name="author" content="Kevin Murphy" />

<link rel="canonical" href="http://localhost:1313/posts/what-is-it-in-ruby-34/">
<meta property="og:url" content="http://localhost:1313/posts/what-is-it-in-ruby-34/">
  <meta property="og:site_name" content="Kevin Murphy">
  <meta property="og:title" content="What Is It (in Ruby 3.4)?">
  <meta property="og:description" content="Itâ€™s it!">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-04T06:40:50-05:00">
    <meta property="article:modified_time" content="2025-01-04T06:40:50-05:00">
    <meta property="article:tag" content="Ruby">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="What Is It (in Ruby 3.4)?">
  <meta name="twitter:description" content="Itâ€™s it!">

<meta name="generator" content="Hugo 0.128.2">
    

  <link rel="stylesheet" href="http://localhost:1313/css/normalize.min.css" />
  <link rel="stylesheet" href="http://localhost:1313/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="http://localhost:1313/css/styles.css" /><link rel='stylesheet' href='http://localhost:1313/css/link-style.css'><link rel='stylesheet' href='http://localhost:1313/css/code-scroll.css'><link rel='stylesheet' href='http://localhost:1313/css/coverage-emoji.css'><link rel='stylesheet' href='http://localhost:1313/css/header-name.css'><link rel='stylesheet' href='http://localhost:1313/css/search.css'>
  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-RVD6VLNE04"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-RVD6VLNE04');
        }
      </script>
    
  


</head>

<body>
  <div id="container">
    <header>
      <div class="header-name">
        <a href="http://localhost:1313/">Kevin Murphy</a>
      </div>

      <ul id="social-media">
             <li>
               <a href="https://github.com/kevin-j-m" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://twitter.com/kevin_j_m" title="Twitter">
               <i class="fab fa-twitter fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://linkedin.com/in/kevinmurphydev" title="LinkedIn">
               <i class="fab fa-linkedin fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://ruby.social/@kevin_j_m" title="Mastodon">
               <i class="fab fa-mastodon fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://dev.to/kevin_j_m" title="devto">
               <i class="fab fa-dev fa-lg"></i>
               </a>
             </li>
        <li>
          <a rel="me" href="https://ruby.social/@kevin_j_m">
          </a>
        </li>
      </ul>
      
      <p><em>Software Developer</em></p>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="http://localhost:1313/">
                <i class="fa-li fa  fa-lg"></i><span>Home</span>
            </a>
        </li>
        
        <li>
            <a class="" href="http://localhost:1313/about/">
                <i class="fa-li fa  fa-lg"></i><span>About</span>
            </a>
        </li>
        
        <li>
            <a class="" href="http://localhost:1313/speaking/">
                <i class="fa-li fa  fa-lg"></i><span>Speaking</span>
            </a>
        </li>
        
        <li>
            <a class="" href="http://localhost:1313/search/">
                <i class="fa-li fa  fa-lg"></i><span>Search</span>
            </a>
        </li>
        
        <li>
          <a href="https://newsletter.kevinjmurphy.com">
                <i class="fa-li fa fa-lg"></i><span>Newsletter</span>
          </a>
        </li>
    </ul>
</nav>


    <main>




<article>

    <h1>What Is It (in Ruby 3.4)?</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" data-pagefind-sort="date:2025-01-04" datetime="2025-01-04T06:40:50-05:00">Jan 4, 2025</time>
        </li>
        
        

        
        <li>
            <em>
                
                    
                    <a href="http://localhost:1313/tags/ruby">#ruby</a>
                
            </em>
        </li>
        

        <li>3 minute read | 596 words</li>
    </ul>
</aside>

    

    
      

    

    <p>This post may appear to be about new functionality in Ruby. However, it may instead be an attempt to write an article with the worst possible SEO.</p>
<p>Anyway, hit it.</p>


<iframe width="560" height="315" src="https://www.youtube.com/embed/mTJ542VTMEE?si=MvYQFv9tqU3n1712" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>


<h2 id="what-is-it">What Is It? <a href="#what-is-it">ðŸ”—</a></h2>
<p>As of Ruby 3.4, <code>it</code> is another way to refer to the first parameter in a block. This may be more obvious by way of an example.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#e6db74">&#34;What is it?&#34;</span><span style="color:#f92672">].</span>map { it <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; It&#39;s it&#34;</span> } <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><p>The block we pass to <code>map</code> does not define a name for the parameter to represent the variable we&rsquo;re manipulating in each iteration. Instead, Ruby knows <code>it</code> refers to that variable.</p>
<p>Starting in Ruby 3.3, we had access to numbered parameters in a block with an underscore. We can write that same example using numbered parameters.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#e6db74">&#34;What is it?&#34;</span><span style="color:#f92672">].</span>map { _1 <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; It&#39;s it&#34;</span> } <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Before Ruby 3.3, we would define the name of a variable in a block, which we can still do with more recent versions of Ruby.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#e6db74">&#34;What is it?&#34;</span><span style="color:#f92672">].</span>map { <span style="color:#f92672">|</span>i<span style="color:#f92672">|</span> i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; It&#39;s it&#34;</span> } <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;What is it? It&#39;s it&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><h2 id="handling-nested-calls">Handling nested calls <a href="#handling-nested-calls">ðŸ”—</a></h2>
<p>Should you have nested blocks that refer to <code>it</code>, Ruby will take <code>it</code> to refer to the parameter of the innermost block.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;You want it all, but you can&#39;t have it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Yeah&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;It&#39;s in your face, but you can&#39;t grab it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Yeah&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.</span>map { it <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Yeah&#34;</span> ? <span style="color:#f92672">[</span>it, it, it<span style="color:#f92672">].</span>map { it<span style="color:#f92672">.</span>upcase }<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;, &#34;</span>) : it }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;You want it all, but you can&#39;t have it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;YEAH, YEAH, YEAH&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;It&#39;s in your face, but you can&#39;t grab it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;YEAH, YEAH, YEAH&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><p>The same is not possible with numbered parameters. An exception is raised due to the ambiguity of what <code>_1</code> refers to.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;You want it all, but you can&#39;t have it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Yeah&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;It&#39;s in your face, but you can&#39;t grab it&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Yeah&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.</span>map { _1 <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Yeah&#34;</span> ? <span style="color:#f92672">[</span>_1, _1, _1<span style="color:#f92672">].</span>map { _1<span style="color:#f92672">.</span>upcase }<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;, &#34;</span>) : _1 }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>syntax error found (<span style="color:#66d9ef">SyntaxError</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span>   <span style="color:#e6db74">&#34;Yeah&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span> <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">7</span> <span style="color:#f92672">|</span> <span style="color:#f92672">...</span> _1<span style="color:#f92672">.</span>upcase }<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;, &#34;</span>) : _1 }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span>     <span style="color:#f92672">^~</span> numbered parameter is already used <span style="color:#66d9ef">in</span> outer block
</span></span></code></pre></div><h2 id="method-names-in-scope">Method names in scope <a href="#method-names-in-scope">ðŸ”—</a></h2>
<p>Ruby also will infer that <code>it</code> refers to the block parameter should there be a method called <code>it</code> in scope.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">it</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;This isn&#39;t it&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Can you feel it, see it, hear it today?&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;If you can&#39;t, then it doesn&#39;t matter anyway&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.</span>map { it<span style="color:#f92672">.</span>gsub(<span style="color:#e6db74">&#34;it&#34;</span>, <span style="color:#e6db74">&#34;IT&#34;</span>) }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Can you feel IT, see IT, hear IT today?&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;If you can&#39;t, then IT doesn&#39;t matter anyway&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><h2 id="variable-names-in-scope">Variable names in scope <a href="#variable-names-in-scope">ðŸ”—</a></h2>
<p>However, if there is a <strong>variable</strong> defined as <code>it</code>, that will take precedence over the block parameter in the block.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>it <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;This isn&#39;t it&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;You will never understand it, &#39;cause it happens too fast&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;And it feels so good, it&#39;s like walking on glass&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.</span>map { it<span style="color:#f92672">.</span>gsub(<span style="color:#e6db74">&#34;it&#34;</span>, <span style="color:#e6db74">&#34;IT&#34;</span>) }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;This isn&#39;t IT&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;This isn&#39;t IT&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><h2 id="youve-got-to-share-it-so-you-dare-it">You&rsquo;ve got to share it, so you dare it <a href="#youve-got-to-share-it-so-you-dare-it">ðŸ”—</a></h2>
<p>If you want to learn more about this new feature, check out the <a href="https://bugs.ruby-lang.org/issues/18980">proposal</a> and the <a href="https://docs.ruby-lang.org/en/3.4/Proc.html#class-Proc-label-it">documentation</a>.</p>


</article>


<section class="post-nav">
    <ul>
        <li>
        
            <a href="http://localhost:1313/posts/2024-review/"><i class="fa fa-chevron-circle-left"></i> 2024 Year-End Review</a>
        
        </li>
        <li>
        
        </li>
    </ul>
</section>
  
    
    
  





</main>
    <footer>
      <script async data-uid="7a2e7a1bb1" src="https://kevinjmurphy.ck.page/7a2e7a1bb1/index.js"></script>

        <h6>Copyright Â© 2023 - Kevin Murphy |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="http://localhost:1313/index.xml">RSS </a></h6>
    </footer>
</div>
<script src="http://localhost:1313/js/scripts.js"></script>

  
  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-RVD6VLNE04"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-RVD6VLNE04');
        }
      </script>
    
  



</body>

</html>

